(function(e,h,r,u){function g(a,b){this.el=a;this.$el=e(a);this.s=e.extend({},t,b);if(this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";this.modules={};this.hideBartimeout=this.lgBusy=this.lGalleryOn=!1;this.isTouch="ontouchstart"in r.documentElement;this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1);this.$items=this.s.dynamic?this.s.dynamicEl:"this"===this.s.selector?
this.$el:""!==this.s.selector?this.s.selectWithin?e(this.s.selectWithin).find(this.s.selector):this.$el.find(e(this.s.selector)):this.$el.children();this.$outer=this.$slide="";this.init();return this}var t={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6E3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,
appendSubHtmlTo:".lg-sub-html",preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};g.prototype.init=function(){var a=this;a.s.preload>a.$items.length&&(a.s.preload=a.$items.length);var b=h.location.hash;0<b.indexOf("lg="+this.s.galleryId)&&(a.index=parseInt(b.split("&slide=")[1],10),e("body").addClass("lg-from-hash"),
e("body").hasClass("lg-on")||setTimeout(function(){a.build(a.index);e("body").addClass("lg-on")}));if(a.s.dynamic)a.$el.trigger("onBeforeOpen.lg"),a.index=a.s.index||0,e("body").hasClass("lg-on")||setTimeout(function(){a.build(a.index);e("body").addClass("lg-on")});else a.$items.on("click.lgcustom",function(b){try{b.preventDefault(),b.preventDefault()}catch(c){b.returnValue=!1}a.$el.trigger("onBeforeOpen.lg");a.index=a.s.index||a.$items.index(this);e("body").hasClass("lg-on")||(a.build(a.index),e("body").addClass("lg-on"))})};
g.prototype.build=function(a){var b=this;b.structure();e.each(e.fn.lightGallery.modules,function(a){b.modules[a]=new e.fn.lightGallery.modules[a](b.el)});b.slide(a,!1,!1);b.s.keyPress&&b.keyPress();1<b.$items.length&&(b.arrow(),setTimeout(function(){b.enableDrag();b.enableSwipe()},50),b.s.mousewheel&&b.mousewheel());b.counter();b.closeGallery();b.$el.trigger("onAfterOpen.lg");b.$outer.on("mousemove.lg click.lg touchstart.lg",function(){b.$outer.removeClass("lg-hide-items");clearTimeout(b.hideBartimeout);
b.hideBartimeout=setTimeout(function(){b.$outer.addClass("lg-hide-items")},b.s.hideBarsDelay)})};g.prototype.structure=function(){var a="",b="",d=0,c="",f=this;e("body").append('<div class="lg-backdrop"></div>');e(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms");for(d=0;d<this.$items.length;d++)a+='<div class="lg-item"></div>';this.s.controls&&1<this.$items.length&&(b='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+
this.s.nextHtml+"</div></div>");".lg-sub-html"===this.s.appendSubHtmlTo&&(c='<div class="lg-sub-html"></div>');a='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+a+'</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>'+b+c+"</div></div>";e("body").append(a);this.$outer=e(".lg-outer");this.$slide=this.$outer.find(".lg-item");this.s.useLeft?(this.$outer.addClass("lg-use-left"),
this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3");f.setTop();e(h).on("resize.lg orientationchange.lg",function(){setTimeout(function(){f.setTop()},100)});this.$slide.eq(this.index).addClass("lg-current");this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0);this.$outer.addClass(this.s.mode);this.s.enableDrag&&1<this.$items.length&&this.$outer.addClass("lg-grab");this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load");this.doCss()&&(a=this.$outer.find(".lg-inner"),
a.css("transition-timing-function",this.s.cssEasing),a.css("transition-duration",this.s.speed+"ms"));e(".lg-backdrop").addClass("in");setTimeout(function(){f.$outer.addClass("lg-visible")},this.s.backdropDuration);this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>');this.prevScrollTop=e(h).scrollTop()};g.prototype.setTop=function(){if("100%"!==this.s.height){var a=e(h).height(),b=(a-parseInt(this.s.height,10))/2,d=
this.$outer.find(".lg");a>=parseInt(this.s.height,10)?d.css("top",b+"px"):d.css("top","0px")}};g.prototype.doCss=function(){var a;a:{a="transition MozTransition WebkitTransition OTransition msTransition KhtmlTransition".split(" ");var b=r.documentElement,d;for(d=0;d<a.length;d++)if(a[d]in b.style){a=!0;break a}a=void 0}return a?!0:!1};g.prototype.isVideo=function(a,b){var d;d=this.s.dynamic?this.s.dynamicEl[b].html:this.$items.eq(b).attr("data-html");if(!a&&d)return{html5:!0};d=a.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i);
var c=a.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),e=a.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),m=a.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);if(d)return{youtube:d};if(c)return{vimeo:c};if(e)return{dailymotion:e};if(m)return{vk:m}};g.prototype.counter=function(){this.s.counter&&e(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")};
g.prototype.addHtml=function(a){var b=null,d;this.s.dynamic?this.s.dynamicEl[a].subHtmlUrl?d=this.s.dynamicEl[a].subHtmlUrl:b=this.s.dynamicEl[a].subHtml:this.$items.eq(a).attr("data-sub-html-url")?d=this.$items.eq(a).attr("data-sub-html-url"):(b=this.$items.eq(a).attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!b&&(b=this.$items.eq(a).attr("title")||this.$items.eq(a).find("img").first().attr("alt")));if(!d)if("undefined"!==typeof b&&null!==b){var c=b.substring(0,1);if("."===c||"#"===c)b=e(b).html()}else b=
"";".lg-sub-html"===this.s.appendSubHtmlTo?d?this.$outer.find(this.s.appendSubHtmlTo).load(d):this.$outer.find(this.s.appendSubHtmlTo).html(b):d?this.$slide.eq(a).load(d):this.$slide.eq(a).append(b);"undefined"!==typeof b&&null!==b&&(""===b?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html"));this.$el.trigger("onAfterAppendSubHtml.lg",[a])};g.prototype.preload=function(a){var b;for(b=1;b<=this.s.preload&&!(b>=this.$items.length-
a);b++)this.loadContent(a+b,!1,0);for(b=1;b<=this.s.preload&&!(0>a-b);b++)this.loadContent(a-b,!1,0)};g.prototype.loadContent=function(a,b,d){var c=this,f=!1,m,g,k,l,n;k=function(a){for(var b=[],c=[],d=0;d<a.length;d++){var f=a[d].split(" ");""===f[0]&&f.splice(0,1);c.push(f[0]);b.push(f[1])}a=e(h).width();for(d=0;d<b.length;d++)if(parseInt(b[d],10)>a){g=c[d];break}};c.s.dynamic?(c.s.dynamicEl[a].poster&&(f=!0,m=c.s.dynamicEl[a].poster),n=c.s.dynamicEl[a].html,g=c.s.dynamicEl[a].src,c.s.dynamicEl[a].responsive&&
(l=c.s.dynamicEl[a].responsive.split(","),k(l)),k=c.s.dynamicEl[a].srcset,l=c.s.dynamicEl[a].sizes):(c.$items.eq(a).attr("data-poster")&&(f=!0,m=c.$items.eq(a).attr("data-poster")),n=c.$items.eq(a).attr("data-html"),g=c.$items.eq(a).attr("href")||c.$items.eq(a).attr("data-src"),c.$items.eq(a).attr("data-responsive")&&(l=c.$items.eq(a).attr("data-responsive").split(","),k(l)),k=c.$items.eq(a).attr("data-srcset"),l=c.$items.eq(a).attr("data-sizes"));var q=!1;c.s.dynamic?c.s.dynamicEl[a].iframe&&(q=
!0):"true"===c.$items.eq(a).attr("data-iframe")&&(q=!0);var p=c.isVideo(g,a);if(!c.$slide.eq(a).hasClass("lg-loaded")){q?c.$slide.eq(a).prepend('<div class="lg-video-cont" style="max-width:'+c.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+g+'"  allowfullscreen="true"></iframe></div></div>'):f?(n="",n=p&&p.youtube?"lg-has-youtube":p&&p.vimeo?"lg-has-vimeo":"lg-has-html5",c.$slide.eq(a).prepend('<div class="lg-video-cont '+n+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+
m+'" /></div></div>')):p?(c.$slide.eq(a).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),c.$el.trigger("hasVideo.lg",[a,g,n])):c.$slide.eq(a).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+g+'" /></div>');c.$el.trigger("onAferAppendSlide.lg",[a]);m=c.$slide.eq(a).find(".lg-object");l&&m.attr("sizes",l);if(k){m.attr("srcset",k);try{picturefill({elements:[m[0]]})}catch(v){console.error("Make sure you have included Picturefill version 2")}}".lg-sub-html"!==
this.s.appendSubHtmlTo&&c.addHtml(a);c.$slide.eq(a).addClass("lg-loaded")}c.$slide.eq(a).find(".lg-object").on("load.lg error.lg",function(){var b=0;d&&!e("body").hasClass("lg-from-hash")&&(b=d);setTimeout(function(){c.$slide.eq(a).addClass("lg-complete");c.$el.trigger("onSlideItemLoad.lg",[a,d||0])},b)});p&&p.html5&&!f&&c.$slide.eq(a).addClass("lg-complete");if(!0===b)if(c.$slide.eq(a).hasClass("lg-complete"))c.preload(a);else c.$slide.eq(a).find(".lg-object").on("load.lg error.lg",function(){c.preload(a)})};
g.prototype.slide=function(a,b,d){var c=this.$outer.find(".lg-current").index(),f=this;if(!f.lGalleryOn||c!==a){var g=this.$slide.length,h=f.lGalleryOn?this.s.speed:0,k=!1,l=!1;if(!f.lgBusy){if(this.s.download){var n;(n=f.s.dynamic?!1!==f.s.dynamicEl[a].downloadUrl&&(f.s.dynamicEl[a].downloadUrl||f.s.dynamicEl[a].src):"false"!==f.$items.eq(a).attr("data-download-url")&&(f.$items.eq(a).attr("data-download-url")||f.$items.eq(a).attr("href")||f.$items.eq(a).attr("data-src")))?(e("#lg-download").attr("href",
n),f.$outer.removeClass("lg-hide-download")):f.$outer.addClass("lg-hide-download")}this.$el.trigger("onBeforeSlide.lg",[c,a,b,d]);f.lgBusy=!0;clearTimeout(f.hideBartimeout);".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){f.addHtml(a)},h);this.arrowDisable(a);b?(h=a-1,k=a+1,0===a&&c===g-1?(k=0,h=g-1):a===g-1&&0===c&&(k=0,h=g-1),this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),f.$slide.eq(h).addClass("lg-prev-slide"),f.$slide.eq(k).addClass("lg-next-slide"),f.$slide.eq(a).addClass("lg-current")):
(f.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),a<c?(l=!0,0!==a||c!==g-1||d||(l=!1,k=!0)):a>c&&(k=!0,a!==g-1||0!==c||d||(l=!0,k=!1)),l?(this.$slide.eq(a).addClass("lg-prev-slide"),this.$slide.eq(c).addClass("lg-next-slide")):k&&(this.$slide.eq(a).addClass("lg-next-slide"),this.$slide.eq(c).addClass("lg-prev-slide")),setTimeout(function(){f.$slide.removeClass("lg-current");f.$slide.eq(a).addClass("lg-current");f.$outer.removeClass("lg-no-trans")},50));f.lGalleryOn?
(setTimeout(function(){f.loadContent(a,!0,0)},this.s.speed+50),setTimeout(function(){f.lgBusy=!1;f.$el.trigger("onAfterSlide.lg",[c,a,b,d])},this.s.speed)):(f.loadContent(a,!0,f.s.backdropDuration),f.lgBusy=!1,f.$el.trigger("onAfterSlide.lg",[c,a,b,d]));f.lGalleryOn=!0;this.s.counter&&e("#lg-counter-current").text(a+1)}}};g.prototype.goToNextSlide=function(a){var b=this;b.lgBusy||(b.index+1<b.$slide.length?(b.index++,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1)):b.s.loop?
(b.index=0,b.$el.trigger("onBeforeNextSlide.lg",[b.index]),b.slide(b.index,a,!1)):b.s.slideEndAnimatoin&&(b.$outer.addClass("lg-right-end"),setTimeout(function(){b.$outer.removeClass("lg-right-end")},400)))};g.prototype.goToPrevSlide=function(a){var b=this;b.lgBusy||(0<b.index?(b.index--,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1)):b.s.loop?(b.index=b.$items.length-1,b.$el.trigger("onBeforePrevSlide.lg",[b.index,a]),b.slide(b.index,a,!1)):b.s.slideEndAnimatoin&&(b.$outer.addClass("lg-left-end"),
setTimeout(function(){b.$outer.removeClass("lg-left-end")},400)))};g.prototype.keyPress=function(){var a=this;if(1<this.$items.length)e(h).on("keyup.lg",function(b){1<a.$items.length&&(37===b.keyCode&&(b.preventDefault(),a.goToPrevSlide()),39===b.keyCode&&(b.preventDefault(),a.goToNextSlide()))});e(h).on("keydown.lg",function(b){!0===a.s.escKey&&27===b.keyCode&&(b.preventDefault(),a.$outer.hasClass("lg-thumb-open")?a.$outer.removeClass("lg-thumb-open"):a.destroy())})};g.prototype.arrow=function(){var a=
this;this.$outer.find(".lg-prev").on("click.lg",function(){a.goToPrevSlide()});this.$outer.find(".lg-next").on("click.lg",function(){a.goToNextSlide()})};g.prototype.arrowDisable=function(a){!this.s.loop&&this.s.hideControlOnEnd&&(a+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),0<a?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled",
"disabled").addClass("disabled"))};g.prototype.setTranslate=function(a,b,d){this.s.useLeft?a.css("left",b):a.css({transform:"translate3d("+b+"px, "+d+"px, 0px)"})};g.prototype.touchMove=function(a,b){var d=b-a;15<Math.abs(d)&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),d,0),this.setTranslate(e(".lg-prev-slide"),-this.$slide.eq(this.index).width()+d,0),this.setTranslate(e(".lg-next-slide"),this.$slide.eq(this.index).width()+d,0))};g.prototype.touchEnd=function(a){var b=
this;"lg-slide"!==b.s.mode&&b.$outer.addClass("lg-slide");this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0");setTimeout(function(){b.$outer.removeClass("lg-dragging");0>a&&Math.abs(a)>b.s.swipeThreshold?b.goToNextSlide(!0):0<a&&Math.abs(a)>b.s.swipeThreshold?b.goToPrevSlide(!0):5>Math.abs(a)&&b.$el.trigger("onSlideClick.lg");b.$slide.removeAttr("style")});setTimeout(function(){b.$outer.hasClass("lg-dragging")||"lg-slide"===b.s.mode||b.$outer.removeClass("lg-slide")},
b.s.speed+100)};g.prototype.enableSwipe=function(){var a=this,b=0,d=0,c=!1;a.s.enableSwipe&&a.isTouch&&a.doCss()&&(a.$slide.on("touchstart.lg",function(c){a.$outer.hasClass("lg-zoomed")||a.lgBusy||(c.preventDefault(),a.manageSwipeClass(),b=c.originalEvent.targetTouches[0].pageX)}),a.$slide.on("touchmove.lg",function(e){a.$outer.hasClass("lg-zoomed")||(e.preventDefault(),d=e.originalEvent.targetTouches[0].pageX,a.touchMove(b,d),c=!0)}),a.$slide.on("touchend.lg",function(){a.$outer.hasClass("lg-zoomed")||
(c?(c=!1,a.touchEnd(d-b)):a.$el.trigger("onSlideClick.lg"))}))};g.prototype.enableDrag=function(){var a=this,b=0,d=0,c=!1,f=!1;a.s.enableDrag&&!a.isTouch&&a.doCss()&&(a.$slide.on("mousedown.lg",function(d){a.$outer.hasClass("lg-zoomed")||!e(d.target).hasClass("lg-object")&&!e(d.target).hasClass("lg-video-play")||(d.preventDefault(),a.lgBusy||(a.manageSwipeClass(),b=d.pageX,c=!0,a.$outer.scrollLeft+=1,--a.$outer.scrollLeft,a.$outer.removeClass("lg-grab").addClass("lg-grabbing"),a.$el.trigger("onDragstart.lg")))}),
e(h).on("mousemove.lg",function(e){c&&(f=!0,d=e.pageX,a.touchMove(b,d),a.$el.trigger("onDragmove.lg"))}),e(h).on("mouseup.lg",function(g){f?(f=!1,a.touchEnd(d-b),a.$el.trigger("onDragend.lg")):(e(g.target).hasClass("lg-object")||e(g.target).hasClass("lg-video-play"))&&a.$el.trigger("onSlideClick.lg");c&&(c=!1,a.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))};g.prototype.manageSwipeClass=function(){var a=this.index+1,b=this.index-1,d=this.$slide.length;this.s.loop&&(0===this.index?b=d-1:
this.index===d-1&&(a=0));this.$slide.removeClass("lg-next-slide lg-prev-slide");-1<b&&this.$slide.eq(b).addClass("lg-prev-slide");this.$slide.eq(a).addClass("lg-next-slide")};g.prototype.mousewheel=function(){var a=this;a.$outer.on("mousewheel.lg",function(b){b.deltaY&&(0<b.deltaY?a.goToPrevSlide():a.goToNextSlide(),b.preventDefault())})};g.prototype.closeGallery=function(){var a=this,b=!1;this.$outer.find(".lg-close").on("click.lg",function(){a.destroy()});a.s.closable&&(a.$outer.on("mousedown.lg",
function(a){b=e(a.target).is(".lg-outer")||e(a.target).is(".lg-item ")||e(a.target).is(".lg-img-wrap")?!0:!1}),a.$outer.on("mouseup.lg",function(d){if(e(d.target).is(".lg-outer")||e(d.target).is(".lg-item ")||e(d.target).is(".lg-img-wrap")&&b)a.$outer.hasClass("lg-dragging")||a.destroy()}))};g.prototype.destroy=function(a){var b=this;a||b.$el.trigger("onBeforeClose.lg");e(h).scrollTop(b.prevScrollTop);a&&(b.s.dynamic||this.$items.off("click.lg click.lgcustom"),e.removeData(b.el,"lightGallery"));this.$el.off(".lg.tm");
e.each(e.fn.lightGallery.modules,function(a){b.modules[a]&&b.modules[a].destroy()});this.lGalleryOn=!1;clearTimeout(b.hideBartimeout);this.hideBartimeout=!1;e(h).off(".lg");e("body").removeClass("lg-on lg-from-hash");b.$outer&&b.$outer.removeClass("lg-visible");e(".lg-backdrop").removeClass("in");setTimeout(function(){b.$outer&&b.$outer.remove();e(".lg-backdrop").remove();a||b.$el.trigger("onCloseAfter.lg")},b.s.backdropDuration+50)};e.fn.lightGallery=function(a){return this.each(function(){if(e.data(this,
"lightGallery"))try{e(this).data("lightGallery").init()}catch(b){console.error("lightGallery has not initiated properly")}else e.data(this,"lightGallery",new g(this,a))})};e.fn.lightGallery.modules={}})(jQuery,window,document);