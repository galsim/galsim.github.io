{"remainingRequest":"/Users/maksim/Desktop/studyVue/vue-crm/node_modules/babel-loader/lib/index.js!/Users/maksim/Desktop/studyVue/vue-crm/node_modules/eslint-loader/index.js??ref--13-0!/Users/maksim/Desktop/studyVue/vue-crm/src/store/auth.js","dependencies":[{"path":"/Users/maksim/Desktop/studyVue/vue-crm/src/store/auth.js","mtime":1570190801776},{"path":"/Users/maksim/Desktop/studyVue/vue-crm/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maksim/Desktop/studyVue/vue-crm/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maksim/Desktop/studyVue/vue-crm/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/maksim/Desktop/studyVue/vue-crm/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport firebase from 'firebase/app';\nexport default {\n  actions: {\n    login: function () {\n      var _login = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(_ref, _ref2) {\n        var dispatch, commit, email, password;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch = _ref.dispatch, commit = _ref.commit;\n                email = _ref2.email, password = _ref2.password;\n                _context.prev = 2;\n                _context.next = 5;\n                return firebase.auth().signInWithEmailAndPassword(email, password);\n\n              case 5:\n                _context.next = 11;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](2);\n                commit('setError', _context.t0);\n                throw _context.t0;\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 7]]);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }(),\n    register: function () {\n      var _register = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(_ref3, _ref4) {\n        var dispatch, email, password, name, uid;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dispatch = _ref3.dispatch;\n                email = _ref4.email, password = _ref4.password, name = _ref4.name;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return firebase.auth().createUserWithEmailAndPassword(email, password);\n\n              case 5:\n                _context2.next = 7;\n                return dispatch('getUid');\n\n              case 7:\n                uid = _context2.sent;\n                _context2.next = 10;\n                return firebase.database().ref(\"/users/\".concat(uid, \"/info/\")).set({\n                  bill: 10000,\n                  name: name\n                });\n\n              case 10:\n                _context2.next = 16;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](2);\n                commit('setError', _context2.t0);\n                throw _context2.t0;\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[2, 12]]);\n      }));\n\n      function register(_x3, _x4) {\n        return _register.apply(this, arguments);\n      }\n\n      return register;\n    }(),\n    getUid: function getUid() {\n      var user = firebase.auth().currentUser;\n      return user ? user.uid : null;\n    },\n    logut: function () {\n      var _logut = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return firebase.auth().signOut();\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function logut() {\n        return _logut.apply(this, arguments);\n      }\n\n      return logut;\n    }()\n  }\n};",{"version":3,"sources":["/Users/maksim/Desktop/studyVue/vue-crm/src/store/auth.js"],"names":["firebase","actions","login","dispatch","commit","email","password","auth","signInWithEmailAndPassword","register","name","createUserWithEmailAndPassword","uid","database","ref","set","bill","getUid","user","currentUser","logut","signOut"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AAEA,eAAe;AACbC,EAAAA,OAAO,EAAE;AACDC,IAAAA,KADC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACMC,gBAAAA,QADN,QACMA,QADN,EACgBC,MADhB,QACgBA,MADhB;AAC0BC,gBAAAA,KAD1B,SAC0BA,KAD1B,EACiCC,QADjC,SACiCA,QADjC;AAAA;AAAA;AAAA,uBAGGN,QAAQ,CAACO,IAAT,GAAgBC,0BAAhB,CAA2CH,KAA3C,EAAkDC,QAAlD,CAHH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAKHF,gBAAAA,MAAM,CAAC,UAAD,cAAN;AALG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AASDK,IAAAA,QATC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASSN,gBAAAA,QATT,SASSA,QATT;AASqBE,gBAAAA,KATrB,SASqBA,KATrB,EAS4BC,QAT5B,SAS4BA,QAT5B,EASsCI,IATtC,SASsCA,IATtC;AAAA;AAAA;AAAA,uBAWGV,QAAQ,CAACO,IAAT,GAAgBI,8BAAhB,CAA+CN,KAA/C,EAAsDC,QAAtD,CAXH;;AAAA;AAAA;AAAA,uBAYeH,QAAQ,CAAC,QAAD,CAZvB;;AAAA;AAYGS,gBAAAA,GAZH;AAAA;AAAA,uBAaGZ,QAAQ,CAACa,QAAT,GAAoBC,GAApB,kBAAkCF,GAAlC,aAA+CG,GAA/C,CAAmD;AACvDC,kBAAAA,IAAI,EAAE,KADiD;AAEvDN,kBAAAA,IAAI,EAAJA;AAFuD,iBAAnD,CAbH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAkBHN,gBAAAA,MAAM,CAAC,UAAD,eAAN;AAlBG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAsBPa,IAAAA,MAtBO,oBAsBE;AACP,UAAMC,IAAI,GAAGlB,QAAQ,CAACO,IAAT,GAAgBY,WAA7B;AACA,aAAOD,IAAI,GAAGA,IAAI,CAACN,GAAR,GAAc,IAAzB;AACD,KAzBM;AA0BDQ,IAAAA,KA1BC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA2BCpB,QAAQ,CAACO,IAAT,GAAgBc,OAAhB,EA3BD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AADI,CAAf","sourcesContent":["import firebase from 'firebase/app'\n\nexport default {\n  actions: {\n    async login({dispatch, commit}, {email, password} ) {\n      try {\n        await firebase.auth().signInWithEmailAndPassword(email, password)\n      } catch(e) {\n        commit('setError', e)\n        throw e\n      }\n    },\n    async register({dispatch}, {email, password, name}) {\n      try {\n        await firebase.auth().createUserWithEmailAndPassword(email, password)\n        const uid = await dispatch('getUid')\n        await firebase.database().ref(`/users/${uid}/info/`).set({\n          bill: 10000,\n          name\n        })\n      } catch(e) {\n        commit('setError', e)\n        throw e\n      }\n    },\n    getUid() {\n      const user = firebase.auth().currentUser\n      return user ? user.uid : null\n    },\n    async logut() {\n      await firebase.auth().signOut()\n    }\n  }\n}\n"]}]}